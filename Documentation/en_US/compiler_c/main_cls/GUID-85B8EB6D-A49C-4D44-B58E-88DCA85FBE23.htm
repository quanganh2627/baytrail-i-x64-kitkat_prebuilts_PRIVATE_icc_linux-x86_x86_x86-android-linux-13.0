<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0014)about:internet -->
<html xmlns:MSHelp="http://www.microsoft.com/MSHelp/" lang="en-us" xml:lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Set Worker Count">
<meta name="DC.subject" content="Intel&reg; Cilk&#8482; Plus, environment variable, __cilkrts_set_param">
<meta name="keywords" content="Intel&reg; Cilk&#8482; Plus, environment variable, __cilkrts_set_param">
<meta name="DC.Relation" scheme="URI" content="GUID-15FC919C-0444-4233-AC7E-9F23209EEC0B.htm">
<meta name="DC.Relation" scheme="URI" content="GUID-7AE52340-0A81-44F8-A525-E06A7C721F65.htm#GUID-7AE52340-0A81-44F8-A525-E06A7C721F65">
<meta name="DC.Relation" scheme="URI" content="http://www.intel.com/software/products/softwaredocs_feedback">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="GUID-85B8EB6D-A49C-4D44-B58E-88DCA85FBE23">
<meta name="DC.Language" content="en-US">
<link rel="stylesheet" type="text/css" href="intel_css_styles.css">
<title>Set Worker Count</title>
<xml>
<MSHelp:Attr Name="DocSet" Value="Intel"></MSHelp:Attr>
<MSHelp:Attr Name="Locale" Value="kbEnglish"></MSHelp:Attr>
<MSHelp:Keyword Index="F" Term="cilk_setworkercnt"></MSHelp:Keyword>
<MSHelp:Keyword Index="F" Term="intel.cpp.option_numberofcilkthreads"></MSHelp:Keyword>
<MSHelp:Attr Name="TopicType" Value="kbReference"></MSHelp:Attr>
</xml>
</head>
<body id="GUID-85B8EB6D-A49C-4D44-B58E-88DCA85FBE23">
 <!-- ==============(Start:NavScript)================= -->
 <script src="NavScript.js" language="JavaScript1.2" type="text/javascript"></script>
 <script language="JavaScript1.2" type="text/javascript">WriteNavLink(0);</script>
 <!-- ==============(End:NavScript)================= -->
<p id="header_text" style="margin-bottom : 20pt"><em>Intel&reg; C++ Compiler XE 13.1 User and Reference Guides</em></p>


 
  <h1 class="topictitle1">Set Worker Count</h1>
 
   
  <div> 
	 <p>By default, the number of worker threads is set to the number of cores on the host system. In most cases, the default value works well. 
		<span><span>(Additionally, on systems that support simultaneous multithreading on each core, Intel&reg; Cilk&#8482; Plus uses all available hardware threads.)</span></span> 
	 </p>
 
	 <p>You can increase or decrease the number of workers under program control or via the environment. You may want to use fewer workers than the number of processor cores available in order to run tests or to reserve resources for other programs. In some cases, you may want to oversubscribe by creating more workers than the number of available processor cores. This may be useful if you have workers waiting on locks, or if you want to test a parallel program on a single-core computer. 
	 </p>
 
	 <p> 
		<strong>Environment</strong> 
	 </p>
 
	 <p>You can specify the number of worker threads using the environment variable 
		<span class="keyword">CILK_NWORKERS</span>. 
	 </p>
 
	 <p>Windows* OS: 
		<samp class="codeph">set CILK_NWORKERS=4</samp> 
	 </p>
 
	 <p>Linux* OS and OS X*: 
		<samp class="codeph">export CILK_NWORKERS=4</samp> 
	 </p>
 
	 <p> 
		<strong>Program Control</strong> 
	 </p>
 
	 <p>Prior to the first call to a function that performs a spawn (<span class="keyword">cilk_spawn</span> or 
		<span class="keyword">cilk_for</span>) within a program, you may set the desired number of workers by calling 
		<samp class="codeph">__cilkrts_set_param("nworkers","<em>N</em>")</samp>, where 
		<em>N</em> is a number expressed in decimal or, with a leading 0x or 0, in hexadecimal or octal. This call to set the worker count overrides the value set in the 
		<span class="keyword">CILK_NWORKERS</span> environment variable. To use 
		<samp class="codeph">__cilkrts_set_param</samp>, make sure to specify #include 
		<span class="filepath">&lt;cilk/cilk_api.h&gt;</span> in your program. 
	 </p>
 
	 <p>Example: 
	 </p>
 
	 <pre> if (0!= __cilkrts_set_param("nworkers","4"))
 {
    printf("Failed to set worker count\n");
    return 1;
 }
</pre> 
  </div>
 
  
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong>&nbsp;<a href="GUID-15FC919C-0444-4233-AC7E-9F23209EEC0B.htm">Build, Run and Debug an Intel&reg; Cilk&#8482; Plus Program</a></div>
</div>
<div class="See Also"><h2>See Also</h2>
<div class="linklist">
<div><a href="GUID-7AE52340-0A81-44F8-A525-E06A7C721F65.htm#GUID-7AE52340-0A81-44F8-A525-E06A7C721F65">__cilkrts_set_param 
		  </a></div></div><br clear="all">
<div class="docfeedback">
<div><a href="http://www.intel.com/software/products/softwaredocs_feedback" target="_blank">Submit feedback on this help topic 
		  </a></div></div></div> 

</body>
</html>
