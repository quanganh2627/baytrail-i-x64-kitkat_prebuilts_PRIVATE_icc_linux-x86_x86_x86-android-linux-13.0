<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0014)about:internet -->
<html xmlns:MSHelp="http://www.microsoft.com/MSHelp/" lang="en-us" xml:lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="profmerge and proforder Tools">
<meta name="DC.subject" content="-prof-use compiler option, profmerge utility, .dpi file, .dyn file, /Qprof-use compiler option, PGO tools, profmerge, proforder, explicit-shape arrays, .dpi, .dyn, tool options, utilities">
<meta name="keywords" content="-prof-use compiler option, profmerge utility, .dpi file, .dyn file, /Qprof-use compiler option, PGO tools, profmerge, proforder, explicit-shape arrays, .dpi, .dyn, tool options, utilities">
<meta name="DC.Relation" scheme="URI" content="GUID-CA2B0F27-8C7A-4C47-B2EE-4893C20D0EAC.htm">
<meta name="DC.Relation" scheme="URI" content="http://www.intel.com/software/products/softwaredocs_feedback">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="GUID-9E804DFC-FA37-402C-BD54-856965D1A8BF">
<meta name="DC.Language" content="en-US">
<link rel="stylesheet" type="text/css" href="intel_css_styles.css">
<title>profmerge and proforder Tools</title>
<xml>
<MSHelp:Attr Name="DocSet" Value="Intel"></MSHelp:Attr>
<MSHelp:Attr Name="Locale" Value="kbEnglish"></MSHelp:Attr>
<MSHelp:Keyword Index="F" Term="optaps_pgo_profutils"></MSHelp:Keyword>
<MSHelp:Keyword Index="F" Term="intel.cpp.optaps_pgo_profutils"></MSHelp:Keyword>
<MSHelp:Attr Name="TopicType" Value="kbReference"></MSHelp:Attr>
</xml>
</head>
<body id="GUID-9E804DFC-FA37-402C-BD54-856965D1A8BF">
 <!-- ==============(Start:NavScript)================= -->
 <script src="NavScript.js" language="JavaScript1.2" type="text/javascript"></script>
 <script language="JavaScript1.2" type="text/javascript">WriteNavLink(0);</script>
 <!-- ==============(End:NavScript)================= -->
<p id="header_text" style="margin-bottom : 20pt"><em>Intel&reg; C++ Compiler XE 13.1 User and Reference Guides</em></p>




<h1 class="topictitle1">profmerge and proforder Tools</h1>




<div>
<div class="section" id="GUID-57A8EA00-F0D4-41E9-AF86-9C07890564E2"><h2 class="sectiontitle">profmerge Tool</h2>

<p>Use the profmerge tool to merge dynamic profile information (.dyn) files and any specified summary files (.dpi). The compiler executes profmerge automatically during the feedback compilation phase when you specify <span class="option">-prof-use</span> (Linux* and OS X*) or <span class="option">/Qprof-use</span> (Windows*).</p>

<p>The command-line usage for profmerge is as follows:</p>



<div class="tablenoborder"><table cellpadding="4" summary="" id="GUID-B8562F74-44DE-4783-9589-34111B9CBA83" width="100%" frame="border" border="1" cellspacing="0" rules="all">

<thead align="left">
<tr valign="top">
  <th class="cellrowborder" align="left" valign="top" id="d520183e120"><p>Syntax</p>
</th>

</tr>

</thead>


<tbody>
<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e120 "><p><span class="option">profmerge [-prof_dir dir_name]</span></p>
</td>

</tr>

</tbody>
</table>
</div>


<p>The tool merges all .dyn files in the current directory, or the directory specified by <span class="option">-prof_dir</span>, and produces a summary file: <span class="filepath">pgopti.dpi</span>.</p>
<div class="Note"><h3 class="NoteTipHead">Note</h3>
<p>The spelling of tools options may differ slightly from compiler options. Tools options use an underscore (for example -prof_dir) instead of the hyphen used by compiler options ompiler options (for example <span class="option">-prof-dir</span> or <span class="option">/Qprof-dir)</span>to join words. Also, on Windows* OS systems, the tool options are preceded by a hyphen ("-") unlike Windows compiler options, which are preceded by a forward slash ("/").</p>
</div>
<p>You can use profmerge tool to merge .dyn files into a .dpi file without recompiling the application. Thus, you can run the instrumented executable file on multiple systems to generate dyn files, and optionally use profmerge with the <span class="option">-prof_dpi</span> option to name each summary dpi file created from the multiple dyn files.</p>

<p>Since the profmerge tool merges all the .dyn files that exist in the given directory, make sure unrelated .dyn files are not present; otherwise, profile information will be based on invalid profile data, which can negatively impact the performance of optimized code.</p>

<p><strong>profmerge Options</strong></p>

<p>The profmerge tool supports the following options:</p>



<div class="tablenoborder"><table cellpadding="4" summary="" id="GUID-05AC653B-03BE-4C36-97A7-49EEC8655373" width="100%" frame="border" border="1" cellspacing="0" rules="all">

<thead align="left">
<tr valign="top">
  <th class="cellrowborder" align="left" valign="top" id="d520183e183"><p>Tool Option</p>
</th>

  <th class="cellrowborder" align="left" valign="top" id="d520183e187"><p>Description</p>
</th>

</tr>

</thead>


<tbody>
<tr valign="top"><td class="cellrowborder" valign="top" headers="d520183e183 "><p><span class="option">-dump</span></p>


</td>
<td class="cellrowborder" valign="top" headers="d520183e187 "><p>Displays profile information.</p>

</td>
</tr>
<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e183 "><p><span class="option">-help</span></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e187 "><p>Lists supported options.</p>
</td>

</tr>


<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e183 "><p><span class="option">-nologo</span></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e187 "><p>Disables version information. This option is supported on Windows* only.</p>
</td>

</tr>


<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e183 "><p><samp class="codeph"><span class="option">-exclude_funcs</span> <var>functions</var></samp></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e187 "><p>Excludes functions from the profile. The list items must be separated by a comma (","); you can use a period (".") as a wild card character in function names.</p>
</td>

</tr>


<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e183 "><p><samp class="codeph"><span class="option">-prof_dir</span> <var>dir</var></samp></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e187 "><p>Specifies the directory from which to read .dyn and .dpi files , and write the .dpi file. Alternatively, you can set the <a href="GUID-E1EC94AE-A13D-463E-B3C3-6D7A7205F5A1.htm#GUID-E1EC94AE-A13D-463E-B3C3-6D7A7205F5A1">environment variable</a>  PROF_DIR. </p>
</td>

</tr>


<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e183 "><p><samp class="codeph"><span class="option">-prof_dpi</span> <var>file</var></samp></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e187 "><p>Specifies the name of the .dpi file being generated.</p>
</td>

</tr>


<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e183 "><p><samp class="codeph"><span class="option">-prof_file</span> <var>file</var></samp></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e187 "><p>Merges information from file matching: dpi_file_and_dyn_tag.</p>
</td>

</tr>




<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e183 "><p><samp class="codeph"><span class="option">-src_old</span> <var>dir</var> <span class="option">-src_new</span> <var>dir</var></samp></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e187 "><p>Changes the directory path stored within the .dpi file.</p>
</td>

</tr>


<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e183 "><p><span class="option">-src_no_dir</span></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e187 "><p>Uses only the file name and not the directory name when reading dyn/dpi records. If you specify <span class="option">-src_no_dir</span>, the directory name of the source file will be ignored when deciding which profile data records correspond to a specific application routine, and the <span class="option">-src-root</span> option is ignored.</p>
</td>

</tr>


<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e183 "><p><samp class="codeph"><span class="option">-src-root</span> <var>dir</var></samp></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e187 "><p>Specifies a directory path prefix for the root directory where the user's application files are stored. This option is ignored if you specify <span class="option">-src_no_dir.</span></p>
</td>

</tr>


<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e183 "><p><samp class="codeph"><span class="option">-a</span> <var>file1.dpi</var> <span class="keyword">...</span> <var>fileN.dpi</var></samp></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e187 "><p>Specifies and merges available .dpi files.</p>
</td>

</tr>


<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e183 "><p><span class="option">-verbose</span></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e187 "><p>Instructs the tool to display full information during merge.</p>
</td>

</tr>


<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e183 "><p><span class="option">-weighted</span></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e187 "><p>Instructs the tool to apply an equal weighting (regardless of execution times) to the dyn file values to normalize the data counts. This keyword is useful when the execution runs have different time durations and you want them to be treated equally.</p>
</td>

</tr>

<tr valign="top"><td class="cellrowborder" valign="top" headers="d520183e183 "><p><span class="option">-gen_weight_spec </span><var>file</var></p>

</td>
<td class="cellrowborder" valign="top" headers="d520183e187 "><p>Instructs the tool to generate a text file containing a list of the  .dyn and .dpi file that were merged with default weight=1/run_count.
</p>
<p>The text file is created in the directory specified by the 
<span class="option">prof_dir</span>
option.</p>
</td>
</tr>
<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e183 "><p><span class="option">-weight_spec </span><var>weight_spec.txt</var></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e187 "><p>Instructs the profmerge tool to generate and use the  text file, <var>weight_spec.txt,</var>  listing   individual .dyn/.dpi files or directory names along with  weight values for them.</p>

<p>When the  <span class="option">-weight_spec</span> option is used:<ul type="disc" id="GUID-7D353024-9D75-4D12-8950-8BE13F2CF7A3"><li><p>a new .dpi file is always created</p>
</li>
<li><p>only files called out by the specification file are merged </p>

</li>
<li><p>dyn timestamps are ignored and merge always takes place</p>
 </li>
</ul>
</p>
<p>The <span class="option">prof_dir</span>
option controls where the input/output <var>weight_spec.txt</var> is located, and the destination of the .dpi file.</p>

<p>The <span class="option">-weight_spec</span> option overrides:<ul type="disc" id="GUID-03D4A39F-D17D-4358-AA78-5FCBD6580755"><li><p>  any values of <span class="option">-a </span>option</p>

</li>
<li><p>  any computation from using <span class="option">-weighted</span> option</p>

</li>
</ul>
</p>
</td>

</tr>
</tbody>
</table>
</div>
<p><strong>Weighting the Runs</strong></p>
<p>Using the <span class="option">-weight_spec</span> option results in a new .dpi file. Only the files listed in the text file  are merged. (No files in the current directory are used unless they are  included in the text file.)
</p>


<p><strong>Relocating source files using profmerge</strong></p>

<p>The Intel&reg; compiler uses the full path to the source file for each routine to look up the profile summary information associated with that routine. By default, this prevents you from:</p>


<ul type="disc" id="GUID-38B96717-B3A3-4AFE-A1DA-93CD8172E6AD">
  <li><p>Using the profile summary file (.dpi) if you move your application sources.</p>
</li>

  <li><p>Sharing the profile summary file with another user who is building identical application sources that are located in a different directory.</p>
</li>

</ul>


<p>You can disable the use of directory names when reading dyn/dpi file records by specifying the <span class="option">profmerge</span> option <span class="option">-src_no_dir</span>. This <span class="option">profmerge</span> option is the same as the compiler option <span class="option">-no-prof-src-dir</span> (Linux and OS X) and <span class="option">/Qprof-src-dir-</span> (Windows).</p>

<p>To enable the movement of application sources, as well as the sharing of profile summary files, you can use the <span class="option">profmerge</span> option <span class="option">-src-root</span> to specify a directory path prefix for the root directory where the application files are stored. Alternatively, you can specify the option pair <span class="option">-src_old</span> <span class="option">-src_new</span> to modify the data in an existing summary dpi file. For example:</p>



<div class="tablenoborder"><table cellpadding="4" summary="" id="GUID-957C026F-F99E-479D-AA01-547AF54F4243" width="100%" frame="border" border="1" cellspacing="0" rules="all">

<thead align="left">
<tr valign="top">
  <th class="cellrowborder" align="left" valign="top" id="d520183e552"><p>Example: relocation command syntax</p>
</th>

</tr>
</thead>


<tbody>
<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e552 "><p><samp class="codeph">profmerge -prof_dir &lt;dir1&gt; -src_old &lt;dir2&gt; -src_new &lt;dir3&gt;</samp></p>
</td>

</tr>

</tbody>
</table>
</div>


<p>where <var>&lt;dir1&gt;</var> is the full path to dynamic information file (.dpi), <var>&lt;dir2&gt;</var> is the old full path to source files, and <var>&lt;dir3&gt;</var> is the new full path to source files. The example command (above) reads the <span class="filepath">pgopti.dpi</span> file, in the location specified in <var>&lt;dir1&gt;</var>. For each <span>function</span>  represented in the <span class="filepath">pgopti.dpi</span> file, whose source path begins with the <var>&lt;dir2&gt;</var> prefix, profmerge replaces that prefix with <var>&lt;dir3&gt;</var>. The <span class="filepath">pgopti.dpi</span> file is updated with the new source path information.</p>

<p>You can run profmerge more than once on a given <span class="filepath">pgopti.dpi</span> file. For example, you may need to do this if the source files are located in multiple directories:</p>



<div class="tablenoborder"><table cellpadding="4" summary="" id="GUID-1B68E063-04A7-4D79-866C-FF022BC94309" width="100%" frame="border" border="1" cellspacing="0" rules="all">

<thead align="left">
<tr valign="top">
  <th class="cellrowborder" align="left" valign="top" id="d520183e619"><p>Operating System</p>
</th>

  <th class="cellrowborder" align="left" valign="top" id="d520183e623"><p>Command Examples</p>
</th>

</tr>

</thead>


<tbody>
<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e619 "><p>Linux and OS X</p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e623 "><p><samp class="codeph">profmerge -prof_dir -src_old /src/prog_1 -src_new /src/prog_2</samp></p>

                                <p><samp class="codeph">profmerge -prof_dir -src_old /proj_1 -src_new /proj_2</samp></p>
</td>

</tr>


<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e619 "><p>Windows</p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e623 "><p><samp class="codeph">profmerge -src_old "c:/program files" -src_new "e:/program files"</samp></p>

                                <p><samp class="codeph">profmerge -src_old c:/proj/application -src_new d:/app</samp></p>
</td>

</tr>

</tbody>
</table>
</div>


<p>In the values specified for <span class="option">-src_old</span> and <span class="option">-src_new</span>, uppercase and lowercase characters are treated as identical. Likewise, forward slash ( <span class="keyword">/</span>) and backward slash ( <span class="keyword">\</span>) characters are treated as identical.</p>
<div class="Note"><h3 class="NoteTipHead">Note</h3>
<p>Because the source relocation feature of profmerge modifies the <span class="filepath">pgopti.dpi</span> file, consider making a backup copy of the file before performing the source relocation.</p>
</div></div>


<div class="section" id="GUID-E426B634-02E3-4559-BC93-795B376BC7F2"><h2 class="sectiontitle">proforder Tool</h2>

<p>The proforder tool is used as part of the feedback compilation phase, to improve program performance. Use proforder to generate a function order list for use with the <span class="option">/ORDER</span> linker option. The tool uses the following syntax:</p>



<div class="tablenoborder"><table cellpadding="4" summary="" id="GUID-7AF61194-D09E-4788-8DEC-44794CF4CFB6" width="100%" frame="border" border="1" cellspacing="0" rules="all">

<thead align="left">
<tr valign="top">
  <th class="cellrowborder" align="left" valign="top" id="d520183e706"><p>Syntax</p>
</th>

</tr>

</thead>


<tbody>
<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e706 "><p><samp class="codeph">proforder [-prof_dir <var>dir</var>] [-o <var>file</var>]</samp></p>
</td>

</tr>

</tbody>
</table>
</div>


<p>where <var>dir</var> is the directory containing the profile files ( <span class="filepath">.dpi</span> and <span class="filepath">.spi</span>), and <var>file</var> is the optional name of the function order list file. The default name is <span class="filepath">proford.txt</span> .</p>


<div class="Note"><h3 class="NoteTipHead">Note</h3>
<p>The spelling of tools options may differ slightly from compiler options. Tools options use an underscore (for example -prof_dir) instead of the hyphen used by compiler options (for example <span class="option">-prof-dir</span> or <span class="option">/Qprof-dir</span>) to join words. Also, on Windows* OS systems, the tool options are preceded by a hyphen ("-") unlike Windows compiler options, which are preceded by a forward slash ("/").</p>

</div>

<p><strong>proforder Options</strong></p>

<p>The proforder tool supports the following options:</p>



<div class="tablenoborder"><table cellpadding="4" summary="" id="GUID-B3153A92-4A62-4E36-AAF1-576221CEE9A2" width="100%" frame="border" border="1" cellspacing="0" rules="all">

<thead align="left">
<tr valign="top">
  <th class="cellrowborder" align="left" valign="top" id="d520183e778"><p>Tool Option</p>
</th>

  <th class="cellrowborder" align="left" valign="top" id="d520183e782"><p>Default</p>
</th>

  <th class="cellrowborder" align="left" valign="top" id="d520183e786"><p>Description</p>
</th>

</tr>

</thead>


<tbody>
<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e778 "><p><span class="option">-help</span></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e782 "><p> </p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e786 "><p>Lists supported options.</p>
</td>

</tr>


<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e778 "><p><span class="option">-nologo</span></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e782 "><p> </p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e786 "><p>Disables version information. This option is supported on Windows* only.</p>
</td>

</tr>


<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e778 "><p><span class="option">-omit_static</span></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e782 "><p> </p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e786 "><p>Instructs the tool to omit static functions from function ordering.</p>
</td>

</tr>


<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e778 "><p><span class="option">-prof_dir</span> <var>dir</var></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e782 "><p> </p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e786 "><p>Specifies the directory where the .spi and .dpi file reside.</p>
</td>

</tr>


<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e778 "><p><span class="option">-prof_dpi</span> <var>file</var></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e782 "><p> </p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e786 "><p>Specifies the name of the .dpi file.</p>
</td>

</tr>


<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e778 "><p><span class="option">-prof_file</span> <var>string</var></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e782 "><p> </p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e786 "><p>Selects the .dpi and .spi files that include the substring value in the file name matching the values passed as string.</p>
</td>

</tr>


<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e778 "><p><span class="option">-prof_spi</span> <var>file</var></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e782 "><p> </p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e786 "><p>Specifies the name of the .spi file.</p>
</td>

</tr>


<tr valign="top">
  <td class="cellrowborder" valign="top" headers="d520183e778 "><p><span class="option">-o</span> <var>file</var></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e782 "><p><span class="filepath">proford.txt</span></p>
</td>

  <td class="cellrowborder" valign="top" headers="d520183e786 "><p>Specifies an alternate name for the output file.</p>
</td>

</tr>

</tbody>
</table>
</div>


</div>

</div>

<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong>&nbsp;<a href="GUID-CA2B0F27-8C7A-4C47-B2EE-4893C20D0EAC.htm">PGO Tools</a></div>
</div>
<div><br clear="all">
<div class="docfeedback">
<div><a href="http://www.intel.com/software/products/softwaredocs_feedback" target="_blank">Submit feedback on this help topic 
		  </a></div></div></div>
</body>
</html>
